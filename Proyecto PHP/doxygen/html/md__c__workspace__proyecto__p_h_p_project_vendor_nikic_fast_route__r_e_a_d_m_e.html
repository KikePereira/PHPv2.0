<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PHP Proyect: FastRoute - Fast request router for PHP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PHP Proyect<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Proyecto PHP - Enrique Pereira</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__c__workspace__proyecto__p_h_p_project_vendor_nikic_fast_route__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="namespace_fast_route.html">FastRoute</a> - Fast request router for PHP </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This library provides a fast implementation of a regular expression based router. <a href="http://nikic.github.io/2014/02/18/Fast-request-routing-using-regular-expressions.html">Blog post explaining how the implementation works and why it is fast.</a></p>
<h1><a class="anchor" id="autotoc_md220"></a>
Install</h1>
<p >To install with composer:</p>
<div class="fragment"><div class="line">composer require nikic/fast-route</div>
</div><!-- fragment --><p >Requires PHP 5.4 or newer.</p>
<h1><a class="anchor" id="autotoc_md221"></a>
Usage</h1>
<p >Here's a basic usage example:</p>
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line"> </div>
<div class="line">require <span class="stringliteral">&#39;/path/to/vendor/autoload.php&#39;</span>;</div>
<div class="line"> </div>
<div class="line">$dispatcher = FastRoute\simpleDispatcher(<span class="keyword">function</span>(<a class="code hl_namespace" href="namespace_fast_route.html">FastRoute</a>\RouteCollector <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>) {</div>
<div class="line">    <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/users&#39;</span>, <span class="stringliteral">&#39;get_all_users_handler&#39;</span>);</div>
<div class="line">    <span class="comment">// {id} must be a number (\d+)</span></div>
<div class="line">    <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user/{id:\d+}&#39;</span>, <span class="stringliteral">&#39;get_user_handler&#39;</span>);</div>
<div class="line">    <span class="comment">// The /{title} suffix is optional</span></div>
<div class="line">    <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/articles/{id:\d+}[/{title}]&#39;</span>, <span class="stringliteral">&#39;get_article_handler&#39;</span>);</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Fetch method and URI from somewhere</span></div>
<div class="line">$httpMethod = $_SERVER[<span class="stringliteral">&#39;REQUEST_METHOD&#39;</span>];</div>
<div class="line">$uri = $_SERVER[<span class="stringliteral">&#39;REQUEST_URI&#39;</span>];</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Strip query string (?foo=bar) and decode URI</span></div>
<div class="line"><span class="keywordflow">if</span> (<span class="keyword">false</span> !== <a class="code hl_variable" href="_operator_bracket_unit_test_8inc.html#ae9d3c596e358d714f7386710046699a1">$pos</a> = strpos($uri, <span class="charliteral">&#39;?&#39;</span>)) {</div>
<div class="line">    $uri = substr($uri, 0, <a class="code hl_variable" href="_operator_bracket_unit_test_8inc.html#ae9d3c596e358d714f7386710046699a1">$pos</a>);</div>
<div class="line">}</div>
<div class="line">$uri = rawurldecode($uri);</div>
<div class="line"> </div>
<div class="line">$routeInfo = $dispatcher-&gt;dispatch($httpMethod, $uri);</div>
<div class="line"><span class="keywordflow">switch</span> ($routeInfo[0]) {</div>
<div class="line">    <span class="keywordflow">case</span> FastRoute\Dispatcher::NOT_FOUND:</div>
<div class="line">        <span class="comment">// ... 404 Not Found</span></div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> FastRoute\Dispatcher::METHOD_NOT_ALLOWED:</div>
<div class="line">        $allowedMethods = $routeInfo[1];</div>
<div class="line">        <span class="comment">// ... 405 Method Not Allowed</span></div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> FastRoute\Dispatcher::FOUND:</div>
<div class="line">        $handler = $routeInfo[1];</div>
<div class="line">        $vars = $routeInfo[2];</div>
<div class="line">        <span class="comment">// ... call $handler with $vars</span></div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">}</div>
<div class="ttc" id="a_lower_case_keyword_unit_test_8inc_html_a8abe176bc41afd728f32ba8c506cbd98"><div class="ttname"><a href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a></div><div class="ttdeci">$r</div><div class="ttdef"><b>Definition:</b> LowerCaseKeywordUnitTest.inc:32</div></div>
<div class="ttc" id="a_operator_bracket_unit_test_8inc_html_ae9d3c596e358d714f7386710046699a1"><div class="ttname"><a href="_operator_bracket_unit_test_8inc.html#ae9d3c596e358d714f7386710046699a1">$pos</a></div><div class="ttdeci">if(!isset( $this-&gt;words[ $wordPos-1])||$this-&gt;words[ $wordPos-1] !==' ') else if($this-&gt;tokens[$pos+1]===&quot;\n&quot;) if( $pos===count( $this-&gt;tokens) - 1) if(substr($basename, -5) !=='Sniff') $pos</div><div class="ttdef"><b>Definition:</b> OperatorBracketUnitTest.inc:75</div></div>
<div class="ttc" id="anamespace_fast_route_html"><div class="ttname"><a href="namespace_fast_route.html">FastRoute</a></div><div class="ttdef"><b>Definition:</b> BadRouteException.php:3</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md222"></a>
Defining routes</h2>
<p >The routes are defined by calling the <code><a class="el" href="namespace_fast_route.html">FastRoute</a>\simpleDispatcher()</code> function, which accepts a callable taking a <code><a class="el" href="namespace_fast_route.html">FastRoute</a>\RouteCollector</code> instance. The routes are added by calling <code>addRoute()</code> on the collector instance:</p>
<div class="fragment"><div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute($method, $routePattern, $handler);</div>
</div><!-- fragment --><p >The <code>$method</code> is an uppercase HTTP method string for which a certain route should match. It is possible to specify multiple valid methods using an array:</p>
<div class="fragment"><div class="line"><span class="comment">// These two calls</span></div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/test&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;POST&#39;</span>, <span class="stringliteral">&#39;/test&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line"><span class="comment">// Are equivalent to this one call</span></div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute([<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;POST&#39;</span>], <span class="stringliteral">&#39;/test&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
</div><!-- fragment --><p >By default the <code>$routePattern</code> uses a syntax where <code>{foo}</code> specifies a placeholder with name <code>foo</code> and matching the regex <code>[^/]+</code>. To adjust the pattern the placeholder matches, you can specify a custom pattern by writing <code>{bar:[0-9]+}</code>. Some examples:</p>
<div class="fragment"><div class="line"><span class="comment">// Matches /user/42, but not /user/xyz</span></div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user/{id:\d+}&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Matches /user/foobar, but not /user/foo/bar</span></div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user/{name}&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Matches /user/foo/bar as well</span></div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user/{name:.+}&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
</div><!-- fragment --><p >Custom patterns for route placeholders cannot use capturing groups. For example <code>{lang:(en|de)}</code> is not a valid placeholder, because <code>()</code> is a capturing group. Instead you can use either <code>{lang:en|de}</code> or <code>{lang:(?:en|de)}</code>.</p>
<p >Furthermore parts of the route enclosed in <code>[...]</code> are considered optional, so that <code>/foo[bar]</code> will match both <code>/foo</code> and <code>/foobar</code>. Optional parts are only supported in a trailing position, not in the middle of a route.</p>
<div class="fragment"><div class="line"><span class="comment">// This route</span></div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user/{id:\d+}[/{name}]&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line"><span class="comment">// Is equivalent to these two routes</span></div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user/{id:\d+}&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user/{id:\d+}/{name}&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Multiple nested optional parts are possible as well</span></div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user[/{id:\d+}[/{name}]]&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This route is NOT valid, because optional parts can only occur at the end</span></div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user[/{id:\d+}]/{name}&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
</div><!-- fragment --><p >The <code>$handler</code> parameter does not necessarily have to be a callback, it could also be a controller class name or any other kind of data you wish to associate with the route. <a class="el" href="namespace_fast_route.html">FastRoute</a> only tells you which handler corresponds to your URI, how you interpret it is up to you.</p>
<h3><a class="anchor" id="autotoc_md223"></a>
Shorcut methods for common request methods</h3>
<p >For the <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>DELETE</code> and <code>HEAD</code> request methods shortcut methods are available. For example:</p>
<div class="fragment"><div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;get(<span class="stringliteral">&#39;/get-route&#39;</span>, <span class="stringliteral">&#39;get_handler&#39;</span>);</div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;post(<span class="stringliteral">&#39;/post-route&#39;</span>, <span class="stringliteral">&#39;post_handler&#39;</span>);</div>
</div><!-- fragment --><p >Is equivalent to:</p>
<div class="fragment"><div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/get-route&#39;</span>, <span class="stringliteral">&#39;get_handler&#39;</span>);</div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;POST&#39;</span>, <span class="stringliteral">&#39;/post-route&#39;</span>, <span class="stringliteral">&#39;post_handler&#39;</span>);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md224"></a>
Route Groups</h3>
<p >Additionally, you can specify routes inside of a group. All routes defined inside a group will have a common prefix.</p>
<p >For example, defining your routes as:</p>
<div class="fragment"><div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addGroup(<span class="stringliteral">&#39;/admin&#39;</span>, <span class="keyword">function</span> (RouteCollector <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>) {</div>
<div class="line">    <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/do-something&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line">    <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/do-another-thing&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line">    <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/do-something-else&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line">});</div>
</div><!-- fragment --><p >Will have the same result as:</p>
<div class="fragment"><div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/admin/do-something&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/admin/do-another-thing&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
<div class="line"><a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/admin/do-something-else&#39;</span>, <span class="stringliteral">&#39;handler&#39;</span>);</div>
</div><!-- fragment --><p ><a class="el" href="class_nested.html">Nested</a> groups are also supported, in which case the prefixes of all the nested groups are combined.</p>
<h2><a class="anchor" id="autotoc_md225"></a>
Caching</h2>
<p >The reason <code>simpleDispatcher</code> accepts a callback for defining the routes is to allow seamless caching. By using <code>cachedDispatcher</code> instead of <code>simpleDispatcher</code> you can cache the generated routing data and construct the dispatcher from the cached information:</p>
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line"> </div>
<div class="line">$dispatcher = FastRoute\cachedDispatcher(<span class="keyword">function</span>(<a class="code hl_namespace" href="namespace_fast_route.html">FastRoute</a>\RouteCollector <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>) {</div>
<div class="line">    <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user/{name}/{id:[0-9]+}&#39;</span>, <span class="stringliteral">&#39;handler0&#39;</span>);</div>
<div class="line">    <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user/{id:[0-9]+}&#39;</span>, <span class="stringliteral">&#39;handler1&#39;</span>);</div>
<div class="line">    <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>-&gt;addRoute(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;/user/{name}&#39;</span>, <span class="stringliteral">&#39;handler2&#39;</span>);</div>
<div class="line">}, [</div>
<div class="line">    <span class="stringliteral">&#39;cacheFile&#39;</span> =&gt; __DIR__ . <span class="stringliteral">&#39;/route.cache&#39;</span>, <span class="comment">/* required */</span></div>
<div class="line">    <span class="stringliteral">&#39;cacheDisabled&#39;</span> =&gt; IS_DEBUG_ENABLED,     <span class="comment">/* optional, enabled by default */</span></div>
<div class="line">]);</div>
</div><!-- fragment --><p >The second parameter to the function is an options array, which can be used to specify the cache file location, among other things.</p>
<h2><a class="anchor" id="autotoc_md226"></a>
Dispatching a URI</h2>
<p ><a class="el" href="class_a.html">A</a> URI is dispatched by calling the <code>dispatch()</code> method of the created dispatcher. This method accepts the HTTP method and a URI. Getting those two bits of information (and normalizing them appropriately) is your job - this library is not bound to the PHP web SAPIs.</p>
<p >The <code>dispatch()</code> method returns an array whose first element contains a status code. It is one of <code>Dispatcher::NOT_FOUND</code>, <code>Dispatcher::METHOD_NOT_ALLOWED</code> and <code>Dispatcher::FOUND</code>. For the method not allowed status the second array element contains a list of HTTP methods allowed for the supplied URI. For example: </p><pre class="fragment">[FastRoute\Dispatcher::METHOD_NOT_ALLOWED, ['GET', 'POST']]
</pre> <blockquote class="doxtable">
<p >&zwj;<b>NOTE:</b> The HTTP specification requires that a <code>405 Method Not Allowed</code> response include the </p>
</blockquote>
<p><code>Allow:</code> header to detail available methods for the requested resource. Applications using <a class="el" href="namespace_fast_route.html">FastRoute</a> should use the second array element to add this header when relaying a 405 response.</p>
<p >For the found status the second array element is the handler that was associated with the route and the third array element is a dictionary of placeholder names to their values. For example: </p><pre class="fragment">/* Routing against GET /user/nikic/42 */

[FastRoute\Dispatcher::FOUND, 'handler0', ['name' =&gt; 'nikic', 'id' =&gt; '42']]
</pre> <h2><a class="anchor" id="autotoc_md227"></a>
Overriding the route parser and dispatcher</h2>
<p >The routing process makes use of three components: <a class="el" href="class_a.html">A</a> route parser, a data generator and a dispatcher. The three components adhere to the following interfaces:</p>
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_fast_route.html">FastRoute</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">interface </span>RouteParser {</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> parse($route);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">interface </span>DataGenerator {</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> addRoute($httpMethod, $routeData, $handler);</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> getData();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">interface </span>Dispatcher {</div>
<div class="line">    <span class="keyword">const</span> NOT_FOUND = 0, FOUND = 1, METHOD_NOT_ALLOWED = 2;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> dispatch($httpMethod, $uri);</div>
<div class="line">}</div>
</div><!-- fragment --><p >The route parser takes a route pattern string and converts it into an array of route infos, where each route info is again an array of it's parts. The structure is best understood using an example: </p><pre class="fragment">/* The route /user/{id:\d+}[/{name}] converts to the following array: */
[
    [
        '/user/',
        ['id', '\d+'],
    ],
    [
        '/user/',
        ['id', '\d+'],
        '/',
        ['name', '[^/]+'],
    ],
]
</pre><p> This array can then be passed to the <code>addRoute()</code> method of a data generator. After all routes have been added the <code>getData()</code> of the generator is invoked, which returns all the routing data required by the dispatcher. The format of this data is not further specified - it is tightly coupled to the corresponding dispatcher.</p>
<p >The dispatcher accepts the routing data via a constructor and provides a <code>dispatch()</code> method, which you're already familiar with.</p>
<p >The route parser can be overwritten individually (to make use of some different pattern syntax), however the data generator and dispatcher should always be changed as a pair, as the output from the former is tightly coupled to the input of the latter. The reason the generator and the dispatcher are separate is that only the latter is needed when using caching (as the output of the former is what is being cached.)</p>
<p >When using the <code>simpleDispatcher</code> / <code>cachedDispatcher</code> functions from above the override happens through the options array:</p>
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line"> </div>
<div class="line">$dispatcher = FastRoute\simpleDispatcher(<span class="keyword">function</span>(<a class="code hl_namespace" href="namespace_fast_route.html">FastRoute</a>\RouteCollector <a class="code hl_variable" href="_lower_case_keyword_unit_test_8inc.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>) {</div>
<div class="line">    <span class="comment">/* ... */</span></div>
<div class="line">}, [</div>
<div class="line">    <span class="stringliteral">&#39;routeParser&#39;</span> =&gt; <span class="stringliteral">&#39;FastRoute\\RouteParser\\Std&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;dataGenerator&#39;</span> =&gt; <span class="stringliteral">&#39;FastRoute\\DataGenerator\\GroupCountBased&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;dispatcher&#39;</span> =&gt; <span class="stringliteral">&#39;FastRoute\\Dispatcher\\GroupCountBased&#39;</span>,</div>
<div class="line">]);</div>
</div><!-- fragment --><p >The above options array corresponds to the defaults. By replacing <code>GroupCountBased</code> by <code>GroupPosBased</code> you could switch to a different dispatching strategy.</p>
<h2><a class="anchor" id="autotoc_md228"></a>
A Note on HEAD Requests</h2>
<p >The HTTP spec requires servers to <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5.1.1" title="RFC 2616 Section 5.1.1">support both GET and HEAD methods</a>:</p>
<blockquote class="doxtable">
<p >&zwj;The methods GET and HEAD MUST be supported by all general-purpose servers </p>
</blockquote>
<p>To avoid forcing users to manually register HEAD routes for each resource we fallback to matching an available GET route for a given resource. The PHP web SAPI transparently removes the entity body from HEAD responses so this behavior has no effect on the vast majority of users.</p>
<p >However, implementers using <a class="el" href="namespace_fast_route.html">FastRoute</a> outside the web SAPI environment (e.g. a custom server) MUST NOT send entity bodies generated in response to HEAD requests. If you are a non-SAPI user this is <em>your responsibility</em>; <a class="el" href="namespace_fast_route.html">FastRoute</a> has no purview to prevent you from breaking HTTP in such cases.</p>
<p >Finally, note that applications MAY always specify their own HEAD method route for a given resource to bypass this behavior entirely.</p>
<h2><a class="anchor" id="autotoc_md229"></a>
Credits</h2>
<p >This library is based on a router that <a href="https://github.com/morrisonlevi">Levi Morrison</a> implemented for the Aerys server.</p>
<p ><a class="el" href="class_a.html">A</a> large number of tests, as well as HTTP compliance considerations, were provided by <a href="https://github.com/rdlowrey">Daniel Lowrey</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
