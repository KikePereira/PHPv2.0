Extending the behavior of the {\ttfamily \mbox{\hyperlink{namespace_invoker}{Invoker}}} is easy and is done by implementing a \href{https://github.com/PHP-DI/Invoker/blob/master/src/ParameterResolver/ParameterResolver.php}{\texttt{ {\ttfamily Parameter\+Resolver}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{interface }ParameterResolver}
\DoxyCodeLine{\{}
\DoxyCodeLine{    \textcolor{keyword}{public} \textcolor{keyword}{function} getParameters(}
\DoxyCodeLine{        ReflectionFunctionAbstract \$reflection,}
\DoxyCodeLine{        array \$providedParameters,}
\DoxyCodeLine{        array \$resolvedParameters}
\DoxyCodeLine{    );}
\DoxyCodeLine{\}}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \$provided\+Parameters} contains the parameters provided by the user when calling {\ttfamily \$invoker-\/\texorpdfstring{$>$}{>}call(\$callable, \$parameters)}
\item {\ttfamily \$resolved\+Parameters} contains parameters that have already been resolved by other parameter resolvers
\end{DoxyItemize}

An {\ttfamily \mbox{\hyperlink{namespace_invoker}{Invoker}}} can chain multiple parameter resolvers to mix behaviors, e.\+g. you can mix \char`\"{}named parameters\char`\"{} support with \char`\"{}dependency injection\char`\"{} support. This is why a {\ttfamily Parameter\+Resolver} should skip parameters that are already resolved in {\ttfamily \$resolved\+Parameters}.

Here is an implementation example for dumb dependency injection that creates a new instance of the classes type-\/hinted\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{class }MyParameterResolver \textcolor{keyword}{implements} ParameterResolver}
\DoxyCodeLine{\{}
\DoxyCodeLine{    \textcolor{keyword}{public} \textcolor{keyword}{function} getParameters(}
\DoxyCodeLine{        ReflectionFunctionAbstract \$reflection,}
\DoxyCodeLine{        array \$providedParameters,}
\DoxyCodeLine{        array \$resolvedParameters}
\DoxyCodeLine{    ) \{}
\DoxyCodeLine{        \textcolor{keywordflow}{foreach} (\$reflection-\/>getParameters() as \$index => \$parameter) \{}
\DoxyCodeLine{            \textcolor{keywordflow}{if} (array\_key\_exists(\$index, \$resolvedParameters)) \{}
\DoxyCodeLine{                \textcolor{comment}{// Skip already resolved parameters}}
\DoxyCodeLine{                \textcolor{keywordflow}{continue};}
\DoxyCodeLine{            \}}
\DoxyCodeLine{}
\DoxyCodeLine{            \mbox{\hyperlink{_class_instantiation_unit_test_8inc_a252ba022809910ea710a068fc1bab657}{\$class}} = \$parameter-\/>getClass();}
\DoxyCodeLine{}
\DoxyCodeLine{            \textcolor{keywordflow}{if} (\mbox{\hyperlink{_class_instantiation_unit_test_8inc_a252ba022809910ea710a068fc1bab657}{\$class}}) \{}
\DoxyCodeLine{                \$resolvedParameters[\$index] = \mbox{\hyperlink{_class_instantiation_unit_test_8inc_a252ba022809910ea710a068fc1bab657}{\$class}}-\/>newInstance();}
\DoxyCodeLine{            \}}
\DoxyCodeLine{        \}}
\DoxyCodeLine{}
\DoxyCodeLine{        \textcolor{keywordflow}{return} \$resolvedParameters;}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


To use it\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$invoker = \textcolor{keyword}{new} \mbox{\hyperlink{class_invoker_1_1_invoker}{Invoker\(\backslash\)Invoker}}(\textcolor{keyword}{new} MyParameterResolver);}
\DoxyCodeLine{}
\DoxyCodeLine{\$invoker-\/>call(\textcolor{keyword}{function} (ArticleManager \$articleManager) \{}
\DoxyCodeLine{    \$articleManager-\/>publishArticle(\textcolor{stringliteral}{'Hello world'}, \textcolor{stringliteral}{'This is the article content.'});}
\DoxyCodeLine{\});}

\end{DoxyCode}


\mbox{\hyperlink{class_a}{A}} new instance of {\ttfamily Article\+Manager} will be created by our parameter resolver.\hypertarget{md__c__workspace__proyecto__p_h_p_project_vendor_php_di_invoker_doc_parameter_resolvers_autotoc_md279}{}\doxysection{Chaining parameter resolvers}\label{md__c__workspace__proyecto__p_h_p_project_vendor_php_di_invoker_doc_parameter_resolvers_autotoc_md279}
The fun starts to happen when we want to add support for many things\+:


\begin{DoxyItemize}
\item named parameters
\item dependency injection for type-\/hinted parameters
\item ...
\end{DoxyItemize}

This is where we should use the \href{https://github.com/PHP-DI/Invoker/blob/master/src/ParameterResolver/ResolverChain.php}{\texttt{ {\ttfamily Resolver\+Chain}}}. This resolver implements the \href{http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern}{\texttt{ Chain of responsibility}} design pattern.

For example the default chain is\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$parameterResolver = \textcolor{keyword}{new} ResolverChain([}
\DoxyCodeLine{    \textcolor{keyword}{new} NumericArrayResolver,}
\DoxyCodeLine{    \textcolor{keyword}{new} AssociativeArrayResolver,}
\DoxyCodeLine{    \textcolor{keyword}{new} DefaultValueResolver,}
\DoxyCodeLine{]);}

\end{DoxyCode}


It allows to support even the weirdest use cases like\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$parameters = [];}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{// First parameter will receive "{}Welcome"{}}}
\DoxyCodeLine{\$parameters[] = \textcolor{stringliteral}{'Welcome'};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{// Parameter named "{}content"{} will receive "{}Hello world!"{}}}
\DoxyCodeLine{\$parameters[\textcolor{stringliteral}{'content'}] = \textcolor{stringliteral}{'Hello world!'};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{// \$published is not defined so it will use its default value}}
\DoxyCodeLine{\$invoker-\/>call(\textcolor{keyword}{function} (\$title, \mbox{\hyperlink{_multiple_statement_alignment_unit_test_8inc_a57b284fe00866494b33afa80ba729bed}{\$content}}, \$published = \textcolor{keyword}{true}) \{}
\DoxyCodeLine{    \textcolor{comment}{// ...}}
\DoxyCodeLine{\}, \$parameters);}

\end{DoxyCode}


We can put our custom parameter resolver in the list and created a super-\/duper invoker that also supports basic dependency injection\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$parameterResolver = \textcolor{keyword}{new} ResolverChain([}
\DoxyCodeLine{    \textcolor{keyword}{new} MyParameterResolver, \textcolor{comment}{// Our resolver is at the top for highest priority}}
\DoxyCodeLine{    \textcolor{keyword}{new} NumericArrayResolver,}
\DoxyCodeLine{    \textcolor{keyword}{new} AssociativeArrayResolver,}
\DoxyCodeLine{    \textcolor{keyword}{new} DefaultValueResolver,}
\DoxyCodeLine{]);}
\DoxyCodeLine{}
\DoxyCodeLine{\$invoker = \textcolor{keyword}{new} \mbox{\hyperlink{class_invoker_1_1_invoker}{Invoker\(\backslash\)Invoker}}(\$parameterResolver);}

\end{DoxyCode}
 